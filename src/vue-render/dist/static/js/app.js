webpackJsonp([1],{"+hAf":function(e,t){},"09yM":function(e,t){},"0CLL":function(e,t){},"DW+F":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("kV13"),n={name:"Menu",components:{},props:{},data:function(){return{isCollapse:!1}},methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)}},watch:{},filters:{},mounted:function(){}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Menu"},[a("el-menu",{attrs:{"default-active":"/GenTrade","default-openeds":["/GenTrade"],collapse:e.isCollapse,router:""}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-tools"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("工具")])]),e._v(" "),a("el-menu-item",{attrs:{index:"/GenTrade"}},[e._v("生成交易")]),e._v(" "),a("el-menu-item",{attrs:{index:"/GenPrintF"}},[e._v("生成打印F表")]),e._v(" "),a("el-menu-item",{attrs:{index:"/GenInterface"}},[e._v("生成接口")])],2)],1)],1)},staticRenderFns:[]};var i={name:"App",components:{Menu:a("C7Lr")(n,l,!1,function(e){a("yfIn")},"data-v-69219a49",null).exports},data:function(){return{menuWidth:200}},computed:{left:function(){return this.menuWidth-200}},methods:{func:function(e){this.menuWidth=e?0:200}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"menu",style:{left:e.left+"px"}},[a("Menu")],1),e._v(" "),a("div",{staticClass:"tools-container",style:{marginLeft:e.menuWidth+"px"}},[a("router-view"),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:200==e.menuWidth,expression:"menuWidth==200"}],staticClass:"el-icon-d-arrow-left handle-icon",on:{click:function(t){return e.func(!0)}}}),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:0==e.menuWidth,expression:"menuWidth==0"}],staticClass:"el-icon-d-arrow-right handle-icon",on:{click:function(t){return e.func(!1)}}})],1)])},staticRenderFns:[]};var o=a("C7Lr")(i,s,!1,function(e){a("DW+F")},"data-v-956f53a0",null).exports,u=a("7LQH"),c={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"Home"},[t("div",[this._v("home")])])}]};var d=a("C7Lr")({name:"Home",components:{},props:{},data:function(){return{}},methods:{},watch:{},filters:{},mounted:function(){}},c,!1,function(e){a("iWT2")},"data-v-551d7287",null).exports,p=a("ZLEe"),m=a.n(p),f=a("rVsN"),h=a.n(f),v=a("lC5x"),g=a.n(v),A=a("J0Oq"),w=a.n(A),b=a("3cXf"),x=a.n(b),C=[{name:"v-model",attrPosition:"data"},{name:"paraFile",attrPosition:"tag",value:""},{name:"listName",attrPosition:"tag",value:""},{name:":success",attrPosition:"methods",args:["name","age"]}],F=[{label:"账号",value:"ACC",isFullRow:!1,tagName:"custom-input",compAttr:JSON.parse(x()(C))},{label:"账号1",value:"ACC1",isFullRow:!1,tagName:"custom-selector",compAttr:JSON.parse(x()(C))},{label:"账号2",value:"ACC2",isFullRow:!1,tagName:"custom-selector",compAttr:JSON.parse(x()(C))},{label:"账号3",value:"ACC3",isFullRow:!1,tagName:"custom-selector",compAttr:JSON.parse(x()(C))}],_=[{groupTitle:"客户信息",label:"账号",":requisite":"true"},{groupTitle:"客户信息",label:"账号1",":requisite":"true"},{groupTitle:"客户信息",label:"账号2",":requisite":"true"},{groupTitle:"客户信息1",label:"账号3",":requisite":"true"}],y={getStandardConfig:function(e){var t=this;return w()(g.a.mark(function a(){var r;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.success(JSON.parse(x()(F)),"成功"),t.abrupt("return",r);case 2:case"end":return t.stop()}},a,t)}))()},transformExcelData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:JSON.parse(x()(_)),r=a.map(function(e){return e.groupTitle});return r=(r=r.filter(function(e,t){return r.indexOf(e)==t})).map(function(e,t){return{groupTitle:e,groupId:t}}),a.forEach(function(e){var t=r.find(function(t){return t.groupTitle==e.groupTitle});e.groupId=t.groupId}),{excelData:a,msgs:this.findEnFieldName(e,t,a).msgs}},findEnFieldName:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=[],n=function(e){var n=a[e],l=t.find(function(e){return e.label==n.label});if(l){n.value=l.value,n.compAttr=l.compAttr,n.isFullRow=l.isFullRow,n.tagName=l.tagName;for(var i=0;i<n.compAttr.length;i++){var s=l.compAttr[i];if("methods"==s.attrPosition){var o=s.name.replace(/:/g,"").toLocaleLowerCase();o=o.charAt(0).toUpperCase()+o.substr(1);var u=""+l.value+o;s.value=u}else"data"==s.attrPosition&&"v-model"==s.name&&(s.value=l.value);["paraFile","listName"].includes(s.name)&&(s.listNameOptions=[])}var c=n.compAttr;n.tagName;if(n.hasOwnProperty(":requisite")&&c.push({name:":requisite",attrPosition:"tag",value:n[":requisite"]}),n.hasOwnProperty(":disabled")){var d=n.compAttr.find(function(e){return":disabled"==e.name});d?d.value=n[":disabled"]:c.push({name:":disabled",attrPosition:"tag",value:n[":disabled"]})}var p={name:"ref",value:n.value,attrPosition:"tag"},m={name:"property",value:n.value,attrPosition:"tag"},f={name:"label",value:n.label,attrPosition:"tag"};c.splice(1,0,m),c.splice(1,0,p),c.splice(1,0,f)}else r.push(n.label)},l=0;l<a.length;l++)n(l);return{msgs:r}}},N=a("89ll"),T=a.n(N);function S(e,t){var a=[],r=[];if(t.compAttr.every(function(e){return Boolean(e.attrPosition)})){for(var n=0;n<t.compAttr.length;n++){var l=t.compAttr[n];"methods"==l.attrPosition?a.push({name:l.name,args:l.args,value:l.value}):"data"==l.attrPosition&&("v-model"==l.name?(l.value="TradeData."+t.value,r.push(t.value)):r.push(l.value))}!function(e,t){var a=t.compAttr,r=t.tagName,n="<"+r+" "+(a=(a=a.filter(function(e){return Boolean(e.value)})).map(function(t){return!1===t.value||""===t.value||void 0===t.value?(e.alert(x()(t)+" 无value值"),""):t.name+'="'+t.value+'"'})).join(" ")+"></"+r+">";t.compTpl=n}(e,t)}else e.alert("<p>有属性没有attrPosition"+x()(t)+"</p>");return{methods:a,dataFields:r}}var k={genAll:function(e,t){var a=function(e,t){for(var a=[],r=[],n=0;n<t.length;n++){var l=t[n];if("custom-table"==l.tagName){var i={tplStr:[],methods:[],dataFields:[]},s=i.methods,o=i.dataFields;a=a.concat(s),r=r.concat(o)}else{var u=S(e,l),c=u.methods,d=u.dataFields;a=a.concat(c),r=r.concat(d)}}return{standardFields:t,methodsAll:a=function(e,t){return t=t.map(function(e){return"async "+e.value+"("+(e.args||[]).join(",")+"){}"})}(0,a),dataFieldsAll:r}}(e,t);return{excelFieldsAll:a.standardFields,methodsAll:a.methodsAll,dataFieldsAll:a.dataFieldsAll}},twoDimensionalArray:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[],r=T.a.groupBy(t,function(e){return e.groupId}),n=Math.max.apply(null,m()(r)),l=0;l<=n;l++)a.push(r[l]);return a=a.map(function(e){return function(e){for(var t=[],a=0;a<e.length;a++){var r=e[a];if(0==t.length)t.push([r]);else{var n=t[t.length-1],l=n[n.length-1];2==n.length?t.push([r]):l.isFullRow?t.push([r]):n.push(r)}}return t}(e)})},handleTableInfo:function(e){return{tMsgs:[],tMethods:[],tDataFields:[],tableTpls:[]}}},R=window.m.xlsx,E=function(e,t){var a=document.createElement("a");a.download=t;var r=URL.createObjectURL(e);a.href=r,a.click(),setTimeout(function(){URL.revokeObjectURL(r)},100)},D=function(e){if("undefined"!=typeof ArrayBuffer){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),r=0;r!=e.length;++r)a[r]=255&e.charCodeAt(r);return t}for(t=new Array(e.length),r=0;r!=e.length;++r)t[r]=255&e.charCodeAt(r);return t};var P={readExcelAsync:function(e){return new h.a(function(t,a){try{var r=new FileReader(e);r.onload=function(e){var a=R.read(e.target.result,{type:"binary"}),r={};a.SheetNames.forEach(function(e){var t=a.Sheets[e],n=R.utils.sheet_to_json(t,{header:"A",blankrows:!1,defval:""});r[e]=n}),t({isSuccess:!0,data:r})},r.readAsBinaryString(e)}catch(e){t({isSuccess:!1,errorcode:e.name,msg:e.message})}})},exportJsonToExcel:function(e,t){new Date;var a={SheetNames:["Sheet1"],Sheets:{},Props:{}};a.Sheets.Sheet1=R.utils.json_to_sheet(e),a.Sheets.Sheet1["!cols"]=[{wch:30},{wch:20},{wch:20},{wch:20}],t=t||"模板.xls",E(new Blob([D(R.write(a,{bookType:"xlsx",bookSST:!1,type:"binary"}))],{type:"application/octet-stream"}),t)}},O=a("x7Ey"),L=a.n(O);var $={fetchStandardFields:function(){var e={SYS_HEAD:{BIZ_FOLN_NO:"",SYS_FOLN_NO:"",CLIENT_TYP:"110064",BIZ_ACCESS_CHNL_CD:"0101",SCENE_CD:"DBComm",SERV_PTY_PROD_CD:"067",SERV_CD:"DB",REQE_PTY_PROD_CD:"066",REQE_PTY_REQE_TS:"2020-01-10 19:14:03.966",REQE_PTY_IP:"20.3.15.151",RequestDate:"20200110",RequestTime:"191403",BagSeqNo:"",AppNum:"TE",Reserve:""},APP_HEAD:{UserNum:"204217",UserName:"俸馨",BranchNum:"2039",BranchName:"四川广汉农村商业银行股份有限公司对公专柜",DvcNum:"",MacValue:"8C-EC-4B-B7-10-91",DeviceNum:"",DeviceModel:"",Tlr:"",AhrTlr:"",AhrTaskNum:"",AhrBrah:"",chcekTlr:"",LUNCH_EMPNBR:"",checkOrgNo:"",BsnTranCode:"",FictTellerNum:"",LegalPersonNum:"2105",TranCode:"",TranNm:""},Body:{CommCode:"DB",SceneCode:"DBComm",TradeData:'{"_busidatakey_":"queryStandardFields","PB_PRIVATE_KEY":"000000000000000A"}'}},t={BranchNum:"2039",ConsumerId:"066",ConsumerIP:"20.3.15.151","Content-Type":"application/json",LegalNum:"2105",Origin:"http://localhost:53008",Referer:"http://localhost:53008/FCClient/modules/frame/custom-service/index.html",Reserve:"",TraceId:"01157865416332746708","User-Agent":"Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36",UserNum:"204217","X-AmebaCloud-RandomNumber":"0.1513719200156629","X-AmebaCloud-VerifyTime":"1578654163332"};return new h.a(function(a){L()({method:"post",url:"http://10.16.2.228/abside/abs-ib-dbcomm/dbComm",headers:t,data:e}).then(function(e){"000000"==e.OutArgs.errorcode?(JSON.parse(e.result.Rslt).Result.map(function(e){return{label:e.COLM_DESC,value:e.COLM_NM,isFullRow:e.DGIT>60,tagName:e.COMP_TAG,compAttr:JSON.parse(e.COMP_DESC||"{}")}}),a({isSuccess:!0,data:[]})):a({isSuccess:!1,data:[]})}).catch(function(e){a({isSuccess:!1,data:[]})})})}},G={name:"GenTrade",data:function(){return{titleRule:[{required:!0,message:"不能为空"}],tradeAttrArea:{tradeRoot:"E:\\work\\zantong\\qdgz_TEClient\\FCClient",devGroup:"asu-test",tradeCode:"00101001",tradeName:"测试交易生成",userName:"",email:""},devGroupOptions:[{label:"测试-asu-test",value:"asu-test"},{label:"现金结算-cash-out",value:"cash-out"}],collapseValues:[],rules:[{type:"any"}],tplsStr:"",excelFieldsAll:[{groupId:0,groupTitle:"客户信息",isFullRow:!1,compTpl:"<div></div>"}],methodsAll:[],distTplData:[],standardFields:[],excelData:[],paraFileOptions:[],tMethods:[],tDataFields:[],tableTpls:[]}},methods:{saveTmpExcel:function(){P.exportJsonToExcel([{"组名称(trade-group)":""},{"栏位名称":""},{"是否必输":""},{"是否可用":""}],"生成交易模板.xls")},chooseExcel:function(){this.tradeRootChange()&&(this.fetchParaFileOptions(),this.$refs.inputFile.value="",this.$refs.inputFile.click())},inputFileChange:function(e){var t=this;return w()(g.a.mark(function a(){var r,n,l,i,s;return g.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.target.files[0],r.path,n=window.m.path.extname(r.path),[".xls",".xlsx"].includes(n)){a.next=6;break}return t.$notify({message:"必须是excel"}),a.abrupt("return");case 6:return a.next=8,P.readExcelAsync(r);case 8:l=a.sent,i=l.data.Sheet1.slice(1),s=i.map(function(e){return{groupTitle:e.A,label:e.B,":requisite":e.C.includes("是"),":disabled":e.D.includes("是")}}),t.parseExcel(s);case 12:case"end":return a.stop()}},a,t)}))()},calcCollapseValues:function(){var e=this.excelData.map(function(e){if(!e.compAttr.every(function(e){return""!==e.value&&void 0!==e.value}))return e.label});this.collapseValues=e.filter(function(e){return e})},genStandardField:function(){var e=this;return w()(g.a.mark(function t(){var a;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.getStandardConfig(e);case 2:if((a=t.sent).isSuccess){t.next=6;break}return e.$notify({title:a.msg,duration:0}),t.abrupt("return");case 6:e.standardFields=a.data;case 7:case"end":return t.stop()}},t,e)}))()},parseExcel:function(e){var t=e.filter(function(e){return e.label.includes("|")}),a=k.handleTableInfo(t),r=a.tMsgs,n=a.tMethods,l=a.tDataFields,i=a.tableTpls;this.tMethods=n,this.tDataFields=l,this.tableTpls=i,e=e.filter(function(e){return!e.label.includes("|")});var s=y.transformExcelData(this,this.standardFields,e),o=s.excelData,u=s.msgs;if((u=u.concat(r)).length>0){(u=u.map(function(e){return" "+e+" "})).unshift('<div style="font-weight:bold;font-size:17px;">请联系标准组添加以下字段后再生成交易</div>');var c=u.join("");this.alert(c,"提示")}else this.excelData=[],this.excelData=o,this.calcCollapseValues()},genTradeTpl:function(){var e=this;return w()(g.a.mark(function t(){var a,r,n,l,i;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validateForm();case 2:if(t.sent){t.next=6;break}return e.$notify({type:"warning",message:"交易属性填完"}),t.abrupt("return");case 6:if(0!=e.excelData.length){t.next=9;break}return e.$notify({type:"warning",message:"先导入统计的excel"}),t.abrupt("return");case 9:a=k.genAll(e,e.excelData),r=a.excelFieldsAll,n=a.methodsAll,l=a.dataFieldsAll,r=r.map(function(e){return{groupId:e.groupId,groupTitle:e.groupTitle,isFullRow:e.isFullRow,compTpl:e.compTpl}}),i=k.twoDimensionalArray(e,r),e.distTplData=i,e.writeToFile({distTplData:i,methodsAll:n,dataFieldsAll:l});case 14:case"end":return t.stop()}},t,e)}))()},writeToFile:function(e){var t=e.distTplData,a=e.methodsAll,r=e.dataFieldsAll,n={tradeCode:"t"+this.tradeAttrArea.tradeCode,Author:(this.tradeAttrArea.userName+"   "+this.tradeAttrArea.email).replace(/\n/g,""),time:new Date,tradeName:this.tradeAttrArea.tradeName,groups:t,dataFieldsAll:r,methodsAll:a,tMethods:this.tMethods,tDataFields:this.tDataFields,tableTpls:this.tableTpls},l=window.m,i=l.path,s=l.fs,o=(l.process,l.ejs),u=(window.m.process.cwd(),this.buildPath("src/vue-render/tpls/App.ejs")),c=i.resolve(this.tradeAttrArea.tradeRoot,"modules/trade",this.tradeAttrArea.devGroup,"t"+this.tradeAttrArea.tradeCode);s.mkdirpSync(c);var d=i.resolve(c,"App.vue");console.log(c,"App.vue","写入成功");var p=s.readFileSync(u,{encoding:"utf-8"}),m=o.render(p,n);s.writeFileSync(d,m,{encoding:"utf-8"}),this.$notify({type:"success",title:"成功",message:"写入模板成功"})},tradeRootChange:function(){if(/FCClient$/.test(this.tradeAttrArea.tradeRoot))return!!window.m.fs.existsSync(this.tradeAttrArea.tradeRoot)||(this.alert("FCClient项目根目录不存在:"+this.tradeAttrArea.tradeRoot),this.$refs.tradeRoot.focus(),!1);this.alert("必须以FCClient结尾")},getUsernameEmail:function(){var e=window.m.child_process;try{var t=e.execSync("git config --global user.name",{encoding:"utf-8"}),a=e.execSync("git config --global user.email",{encoding:"utf-8"});this.tradeAttrArea.userName=t,this.tradeAttrArea.email=a}catch(e){}},validateForm:function(){var e=this;return new h.a(function(t){e.$refs.titleForm.validate(function(a){var r=e.tradeRootChange();t(a&&r)})})},fetchParaFileOptions:function(){var e=window.m,t=e.fs,a=e.path.resolve(this.tradeAttrArea.tradeRoot,"static/para/selector-config"),r=t.readdirSync(a);r=r.filter(function(e){return/\.json/.test(e)}),this.paraFileOptions=r.map(function(e){return{label:e,value:e}})},paraFileOptionsChange:function(e,t){var a=window.m,r=a.fs,n=a.path,l=t.find(function(e){return"listName"===e.name});if(l){var i=n.resolve(this.tradeAttrArea.tradeRoot,"static/para/selector-config",e),s=r.readFileSync(i),o=m()(JSON.parse(s));l.listNameOptions=o.map(function(e){return{label:e,value:e}}),l.value=""}else console.log("不存在listName",t)},fetchStandardFields:function(){var e=this;return w()(g.a.mark(function t(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.fetchStandardFields();case 2:e.sent;case 3:case"end":return e.stop()}},t,e)}))()}},computed:{},mounted:function(){this.genStandardField(),this.getUsernameEmail()}},M={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"GenTrade"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("交易属性")]),e._v(" "),a("el-form",{ref:"titleForm",attrs:{model:e.tradeAttrArea,"label-width":"130px",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"FCClient路径",rules:e.titleRule,prop:"tradeRoot"}},[a("el-input",{ref:"tradeRoot",on:{change:e.tradeRootChange},model:{value:e.tradeAttrArea.tradeRoot,callback:function(t){e.$set(e.tradeAttrArea,"tradeRoot",t)},expression:"tradeAttrArea.tradeRoot"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开发组",rules:e.titleRule,prop:"devGroup"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.tradeAttrArea.devGroup,callback:function(t){e.$set(e.tradeAttrArea,"devGroup",t)},expression:"tradeAttrArea.devGroup"}},e._l(e.devGroupOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"8位交易码",rules:e.titleRule,prop:"tradeCode"}},[a("el-input",{model:{value:e.tradeAttrArea.tradeCode,callback:function(t){e.$set(e.tradeAttrArea,"tradeCode",t)},expression:"tradeAttrArea.tradeCode"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"交易名称",rules:e.titleRule,prop:"tradeName"}},[a("el-input",{model:{value:e.tradeAttrArea.tradeName,callback:function(t){e.$set(e.tradeAttrArea,"tradeName",t)},expression:"tradeAttrArea.tradeName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开发名称",rules:e.titleRule,prop:"userName"}},[a("el-input",{model:{value:e.tradeAttrArea.userName,callback:function(t){e.$set(e.tradeAttrArea,"userName",t)},expression:"tradeAttrArea.userName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开发邮件",rules:e.titleRule,prop:"email"}},[a("el-input",{model:{value:e.tradeAttrArea.email,callback:function(t){e.$set(e.tradeAttrArea,"email",t)},expression:"tradeAttrArea.email"}})],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-button",{attrs:{type:"primary",icon:"el-icon-document"},on:{click:e.genTradeTpl}},[e._v("生成交易")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-upload2"},on:{click:e.chooseExcel}},[e._v("导入交易统计excel")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-download"},on:{click:e.saveTmpExcel}},[e._v("生成交易统计模板excel")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-download"},on:{click:e.fetchStandardFields}},[e._v("获取标准字段")])],1),e._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[e._v("交易内容")]),e._v(" "),a("div",[a("el-form",{ref:"form",attrs:{"label-width":"80px",size:"mini"}},[a("div",{staticClass:"groups"},[a("el-collapse",{model:{value:e.collapseValues,callback:function(t){e.collapseValues=t},expression:"collapseValues"}},e._l(e.excelData,function(t,r){return a("div",{key:r,staticClass:"group"},[a("el-collapse-item",{attrs:{name:t.label}},[a("template",{slot:"title"},[a("span",[e._v("组："+e._s(t.groupTitle))]),e._v(" "),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("栏位："+e._s(t.label))])]),e._v(" "),a("el-row",e._l(t.compAttr,function(r,n){return a("div",{key:n},[a("el-col",{attrs:{span:6}},["paraFile"==r.name?[a("el-form-item",{attrs:{label:r.name,rules:e.rules}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:""},on:{change:function(a){return e.paraFileOptionsChange(r.value,t.compAttr)}},model:{value:r.value,callback:function(t){e.$set(r,"value",t)},expression:"compo.value"}},e._l(e.paraFileOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]:"listName"==r.name?[a("el-form-item",{attrs:{label:r.name,rules:e.rules}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:""},model:{value:r.value,callback:function(t){e.$set(r,"value",t)},expression:"compo.value"}},e._l(r.listNameOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]:[a("el-form-item",{attrs:{label:r.name,rules:e.rules}},[a("input",{directives:[{name:"model",rawName:"v-model",value:r.value,expression:"compo.value"}],staticStyle:{width:"100%"},domProps:{value:r.value},on:{input:function(t){t.target.composing||e.$set(r,"value",t.target.value)}}})])]],2)],1)}),0)],2)],1)}),0)],1)])],1),e._v(" "),a("input",{ref:"inputFile",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.inputFileChange}})],1)},staticRenderFns:[]};var I=a("C7Lr")(G,M,!1,function(e){a("s3Mj")},"data-v-acd9f604",null).exports,B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"GenPrintF"},[a("el-form",{ref:"form",attrs:{"label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"F表标题："}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"F表字段："}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:40},placeholder:"输入字段格式:(账号|客户姓名|性别|账户类型)"},model:{value:e.fields,callback:function(t){e.fields=t},expression:"fields"}})],1)],1)],1)},staticRenderFns:[]};var q=a("C7Lr")({name:"GenPrintF",components:{},props:{},data:function(){return{fields:"账号|客户姓名|性别|账户类型",title:"无标题"}},methods:{},watch:{},filters:{},mounted:function(){}},B,!1,function(e){a("namL")},"data-v-532c8d22",null).exports,W=window.m.xlsx,j={name:"GenInterface",components:{},props:{},data:function(){return{}},methods:{selectExcel:function(){this.$refs.inputFile.value="",this.$refs.inputFile.click()},transform:function(){},inputFileChange:function(e){var t=this;return w()(g.a.mark(function a(){var r,n,l,i,s,o,u,c,d,p,m,f,h,v,A;return g.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=window.m,n=r.fs,l=r.path,i=e.target.files[0],s=i.path,window.m.path.basename(s),o=window.m.path.extname(i.path),u=l.parse(s),c=u.dir,d=u.ext,p=u.name,m=l.resolve(c,p+"_"+Date.now()+d),[".xls",".xlsx"].includes(o)){a.next=10;break}return t.$notify({message:"必须是excel"}),a.abrupt("return");case 10:return a.next=12,P.readExcelAsync(i);case 12:return f=a.sent,h=f.data,v=n.readFileSync(s),A=W.read(v,{type:"array"}),a.next=18,t.genNewExcel(h,A,m);case 18:case"end":return a.stop()}},a,t)}))()},genNewExcel:function(e,t,a){var r=this;return w()(g.a.mark(function n(){var l;return g.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r.genStyle(t),n.next=3,r.handleData(e,t);case 3:if(n.sent){n.next=6;break}return n.abrupt("return");case 6:l=W.write(t,{type:"buffer",bookType:"xlsx"}),fs.writeFileSync(a,l),r.alert("成功生成文件"+a,"成功");case 9:case"end":return n.stop()}},n,r)}))()},genStyle:function(e){var t=[{wch:20},{wch:20},{wch:20},{wch:8},{wch:8},{wch:3},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20}],a=new Array(20).fill(1).map(function(e){return{wch:20}}),r=e.Sheets;for(var n in r)r[n]["!cols"]="INDEX"==n?a:t},handleData:function(e,t){var a=this;return w()(g.a.mark(function r(){var n,l,i,s,o,u,c,d,p,m,f,h;return g.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=[],l={},r.t0=g.a.keys(e);case 3:if((r.t1=r.t0()).done){r.next=24;break}if("INDEX"!=(i=r.t1.value)){r.next=7;break}return r.abrupt("continue",3);case 7:l[i]||(l[i]={}),s=e[i],o=0;case 10:if(!(o<s.length)){r.next=22;break}if(u=s[o],!String(u.B).trim()){r.next=19;break}if(c="G"+(o+1),!(o>5)){r.next=19;break}return r.next=17,a.findEnField(u.B,n);case 17:d=r.sent,l[i][c]=d;case 19:o++,r.next=10;break;case 22:r.next=3;break;case 24:for(p in l)for(m in l[p])(f=t.Sheets[p][m])&&(f.v=l[p][m]);return 0!=n.length&&(h=n.map(function(e){return'<span style="margin-left:5px;">'+e+"</span>"}).join(""),a.alert(h,"以下字段联系标准组添加后再生成接口")),r.abrupt("return",0==n.length);case 27:case"end":return r.stop()}},r,a)}))()},findEnField:function(e){var t=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return w()(g.a.mark(function a(){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!["中文名称"].includes(e)){t.next=3;break}return t.abrupt("return","");case 3:return t.abrupt("return","test_field");case 4:case"end":return t.stop()}},a,t)}))()}},watch:{},filters:{},mounted:function(){}},U={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"GenInterface"},[t("el-divider",{attrs:{"content-position":"left"}},[this._v("操作区")]),this._v(" "),t("el-row",[t("el-button",{attrs:{type:"primary",icon:"el-icon-upload2"},on:{click:this.selectExcel}},[this._v("选择需要转换的接口excel")])],1),this._v(" "),t("input",{ref:"inputFile",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:this.inputFileChange}})],1)},staticRenderFns:[]};var V=a("C7Lr")(j,U,!1,function(e){a("NqFX")},"data-v-513705ff",null).exports;r.default.use(u.a);var J=new u.a({routes:[{path:"/",name:"Home",redirect:"/GenTrade",component:d},{path:"/GenTrade",name:"GenTrade",component:I},{path:"/GenPrintF",name:"GenPrintF",component:q},{path:"/GenInterface",name:"GenInterface",component:V}]}),H=(a("0CLL"),a("09yM"),a("TcQY")),z=a.n(H),Y=(a("+hAf"),{methods:{success:function(e,t){return{isSuccess:!0,msg:t||"",data:e||{}}},fail:function(e,t){return{isSuccess:!1,msg:t||"",data:e||{}}},alert:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new h.a(function(r){e.$alert(t,a,{dangerouslyUseHTMLString:!0,closeOnPressEscape:!1,closeOnClickModal:!1}).then(function(e){return r(!0)}).catch(function(e){return r(!1)})})},repeat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\t").repeat(e)},buildPath:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=window.m,a=t.isDev,r=t.path,n=(t.process,window.m.process.cwd());return a?r.resolve(n,e):r.resolve(n,"resources/app/",e)}},mounted:function(){(window.comps||(window.comps={}))[this.$options.name||"anonymous"]=this}});r.default.use(z.a,{size:"small",zIndex:3e3}),r.default.config.productionTip=!1,r.default.mixin(Y),new r.default({el:"#app",router:J,components:{App:o},template:"<App/>"})},NqFX:function(e,t){},iWT2:function(e,t){},namL:function(e,t){},s3Mj:function(e,t){},yfIn:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.js.map